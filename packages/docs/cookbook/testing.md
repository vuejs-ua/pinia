# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å—Ö–æ–≤–∏—â

–°—Ö–æ–≤–∏—â–∞ –∑–∞ –∑–∞–¥—É–º–æ–º –±—É–¥—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –≤ –±–∞–≥–∞—Ç—å–æ—Ö –º—ñ—Å—Ü—è—Ö —ñ –º–æ–∂—É—Ç—å –∑—Ä–æ–±–∏—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞–±–∞–≥–∞—Ç–æ —Å–∫–ª–∞–¥–Ω—ñ—à–∏–º, –Ω—ñ–∂ —Ü–µ –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏. –ù–∞ —â–∞—Å—Ç—è, —Ü–µ –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ —Ç–∞–∫. –ü—ñ–¥ —á–∞—Å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å—Ö–æ–≤–∏—â –º–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–¥–±–∞—Ç–∏ –ø—Ä–æ —Ç—Ä–∏ —Ä–µ—á—ñ:

- –ü—Ä–∏–º—ñ—Ä–Ω–∏–∫ `pinia`: —Å—Ö–æ–≤–∏—â–∞ –Ω–µ –º–æ–∂—É—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –±–µ–∑ –Ω—å–æ–≥–æ
- `actions`: —É –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ –≤–æ–Ω–∏ –º—ñ—Å—Ç—è—Ç—å –Ω–∞–π—Å–∫–ª–∞–¥–Ω—ñ—à—É –ª–æ–≥—ñ–∫—É –Ω–∞—à–∏—Ö —Å—Ö–æ–≤–∏—â. –•—ñ–±–∞ –Ω–µ –±—É–ª–æ –± –¥–æ–±—Ä–µ, —è–∫–±–∏ –≤–æ–Ω–∏ –±—É–ª–∏ —ñ–º—ñ—Ç–æ–≤–∞–Ω—ñ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º?
- –ü–ª–∞–≥—ñ–Ω–∏: —è–∫—â–æ –≤–∏ –ø–æ–∫–ª–∞–¥–∞—î—Ç–µ—Å—è –Ω–∞ –ø–ª–∞–≥—ñ–Ω–∏, –≤–∞–º —Ç–∞–∫–æ–∂ –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —ó—Ö –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ó–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —â–æ –∞–±–æ —è–∫ –≤–∏ —Ç–µ—Å—Ç—É—î—Ç–µ, –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ-—Ä—ñ–∑–Ω–æ–º—É –ø–æ–¥–±–∞—Ç–∏ –ø—Ä–æ —Ü—ñ —Ç—Ä–∏ —Ä–µ—á—ñ.

## –ú–æ–¥—É–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å—Ö–æ–≤–∏—â–∞

–î–ª—è –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å—Ö–æ–≤–∏—â–∞ –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–æ—é —á–∞—Å—Ç–∏–Ω–æ—é —î —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ `pinia`:

```js
// stores/counter.spec.ts
import { setActivePinia, createPinia } from 'pinia'
import { useCounterStore } from '../src/stores/counter'

describe('Counter Store', () => {
  beforeEach(() => {
    // —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—É pinia —ñ —Ä–æ–±–∏—Ç—å —ó—ó –∞–∫—Ç–∏–≤–Ω–∏–º, —â–æ–± –≤–æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥–±–∏—Ä–∞–ª–∞—Å—è
    // –±—É–¥—å-—è–∫–∏–º –≤–∏–∫–ª–∏–∫–æ–º useStore() –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ —ó—ó –π–æ–º—É:
    // `useStore(pinia)`
    setActivePinia(createPinia())
  })

  it('–∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è', () => {
    const counter = useCounterStore()
    expect(counter.n).toBe(0)
    counter.increment()
    expect(counter.n).toBe(1)
  })

  it('–∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è –Ω–∞ —Å—É–º—É', () => {
    const counter = useCounterStore()
    counter.increment(10)
    expect(counter.n).toBe(10)
  })
})
```

–Ø–∫—â–æ —É –≤–∞—Å —î –±—É–¥—å-—è–∫—ñ –ø–ª–∞–≥—ñ–Ω–∏ —Å—Ö–æ–≤–∏—â–∞, –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –æ–¥–Ω—É —Ä—ñ—á: **–ø–ª–∞–≥—ñ–Ω–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º—É—Ç—å—Å—è, –¥–æ–∫–∏ –≤ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –Ω–µ –±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `pinia`**. –¶—é –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–∞ –≤–∏—Ä—ñ—à–∏—Ç–∏, —Å—Ç–≤–æ—Ä–∏–≤—à–∏ –ø–æ—Ä–æ–∂–Ω—ñ–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –∞–±–æ –ø—ñ–¥—Ä–æ–±–ª–µ–Ω–∏–π:

```js
import { setActivePinia, createPinia } from 'pinia'
import { createApp } from 'vue'
import { somePlugin } from '../src/stores/plugin'

// —Ç–æ–π —Å–∞–º–∏–π –∫–æ–¥, —â–æ –π –≤–∏—â–µ...

// –≤–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–µ—Å—Ç—É
const app = createApp({})
beforeEach(() => {
  const pinia = createPinia().use(somePlugin)
  app.use(pinia)
  setActivePinia(pinia)
})
```

## –ú–æ–¥—É–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

–¶—å–æ–≥–æ –º–æ–∂–Ω–∞ –¥–æ—Å—è–≥—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `createTestingPinia()`, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î –µ–∫–∑–µ–º–ø–ª—è—Ä pinia, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏ —É –º–æ–¥—É–ª—å–Ω–æ–º—É —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤.

–ü–æ—á–Ω—ñ—Ç—å —ñ–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è `@pinia/testing`:

```shell
npm i -D @pinia/testing
```

–Ü –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ —Å—Ç–≤–æ—Ä–∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—É pinia —É —Å–≤–æ—ó—Ö —Ç–µ—Å—Ç–∞—Ö –ø—ñ–¥ —á–∞—Å –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```js
import { mount } from '@vue/test-utils'
import { createTestingPinia } from '@pinia/testing'
// —ñ–º–ø–æ—Ä—Ç—É–π—Ç–µ –±—É–¥—å-—è–∫–µ —Å—Ö–æ–≤–∏—â–µ, –∑ —è–∫–∏–º –≤–∏ —Ö–æ—á–µ—Ç–µ –≤–∑–∞—î–º–æ–¥—ñ—è—Ç–∏ –≤ —Ç–µ—Å—Ç–∞—Ö
import { useSomeStore } from '@/stores/myStore'

const wrapper = mount(Counter, {
  global: {
    plugins: [createTestingPinia()],
  },
})

const store = useSomeStore() // –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç–µ—Å—Ç—É–≤–∞–ª—å–Ω—É pinia!

// —Å—Ç–∞–Ω–æ–º –º–æ–∂–Ω–∞ –∫–µ—Ä—É–≤–∞—Ç–∏ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ
store.name = 'my new name'
// —Ç–∞–∫–æ–∂ —Ü–µ –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ —á–µ—Ä–µ–∑ –ø–∞—Ç—á
store.$patch({ name: 'new name' })
expect(store.name).toBe('new name')

// –¥—ñ—ó –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —î –∑–∞–≥–ª—É—à–∫–∞–º–∏, —Ç–æ–±—Ç–æ –≤–æ–Ω–∏ –Ω–µ –≤–∏–∫–æ–Ω—É—é—Ç—å —Å–≤—ñ–π –∫–æ–¥ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.
// –î–∏–≤—ñ—Ç—å—Å—è –Ω–∏–∂—á–µ, —â–æ–± –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ü—é –ø–æ–≤–µ–¥—ñ–Ω–∫—É.
store.someAction()

expect(store.someAction).toHaveBeenCalledTimes(1)
expect(store.someAction).toHaveBeenLastCalledWith()
```

–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ —è–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Vue 2, `@vue/test-utils` –ø–æ—Ç—Ä–µ–±—É—î [–¥–µ—â–æ —ñ–Ω—à–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó](#Unit-test-components-Vue-2).

### –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω

–í–∏ –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω **–≤—Å—ñ—Ö –≤–∞—à–∏—Ö —Å—Ö–æ–≤–∏—â** –ø—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ—ó pinia, –ø–µ—Ä–µ–¥–∞–≤—à–∏ –æ–±'—î–∫—Ç `initialState`. –¶–µ–π –æ–±'—î–∫—Ç –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è —Ç–µ—Å—Ç—É–≤–∞–ª—å–Ω–æ—é pinia –¥–ª—è _–ø–∞—Ç—á—É_ —Å—Ö–æ–≤–∏—â, –ø—ñ–¥ —á–∞—Å —ó—Ö —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è. –ü—Ä–∏–ø—É—Å—Ç—ñ–º–æ, –≤–∏ —Ö–æ—á–µ—Ç–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å—Ç–∞–Ω —Ü—å–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞:

```ts
import { defineStore } from 'pinia'

const useCounterStore = defineStore('counter', {
  state: () => ({ n: 0 }),
  // ...
})
```

–û—Å–∫—ñ–ª—å–∫–∏ —Å—Ö–æ–≤–∏—â–µ –º–∞—î –Ω–∞–∑–≤—É _"counter"_, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –æ–±'—î–∫—Ç –¥–æ `initialState`:

```ts
// –¥–µ—Å—å —É –≤–∞—à–æ–º—É —Ç–µ—Å—Ç—ñ
const wrapper = mount(Counter, {
  global: {
    plugins: [
      createTestingPinia({
        initialState: {
          counter: { n: 20 }, // –ø–æ—á–∞—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –∑ 20 –∑–∞–º—ñ—Å—Ç—å 0
        },
      }),
    ],
  },
})

const store = useSomeStore() // –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç–µ—Å—Ç—É–≤–∞–ª—å–Ω—É pinia!
store.n // 20
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ –¥—ñ–π

`createTestingPinia` –≤—Å—ñ –¥—ñ—ó —Å—Ö–æ–≤–∏—â–∞ —Ä–æ–±–∏—Ç—å –∑–∞–≥–ª—É—à–∫–∞–º–∏, —è–∫—â–æ –Ω–µ –≤–∫–∞–∑–∞–Ω–æ —ñ–Ω–∞–∫—à–µ. –¶–µ –¥–æ–∑–≤–æ–ª—è—î —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤–∞—à—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ç–∞ —Å—Ö–æ–≤–∏—â–∞ –æ–∫—Ä–µ–º–æ.

–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ —Å–∫–∞—Å—É–≤–∞—Ç–∏ —Ü—é –ø–æ–≤–µ–¥—ñ–Ω–∫—É —Ç–∞ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –≤–∞—à—ñ –¥—ñ—ó –ø—ñ–¥ —á–∞—Å —Ç–µ—Å—Ç—ñ–≤, –≤–∫–∞–∂—ñ—Ç—å `stubActions: false` –ø—ñ–¥ —á–∞—Å –≤–∏–∫–ª–∏–∫—É `createTestingPinia`:

```js
const wrapper = mount(Counter, {
  global: {
    plugins: [createTestingPinia({ stubActions: false })],
  },
})

const store = useSomeStore()

// –¢–µ–ø–µ—Ä —Ü–µ–π –≤–∏–∫–ª–∏–∫ –ë–£–î–ï –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é, –≤–∏–∑–Ω–∞—á–µ–Ω—É —Å—Ö–æ–≤–∏—â–µ–º
store.someAction()

// ...–∞–ª–µ –≤—ñ–Ω –≤—Å–µ —â–µ –∑–∞–≥–æ—Ä–Ω—É—Ç–∏–π –Ω–∞–≥–ª—è–¥–∞—á–µ–º, —Ç–æ–º—É –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –≤–∏–∫–ª–∏–∫–∏
expect(store.someAction).toHaveBeenCalledTimes(1)
```

### –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó createSpy

–Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Jest –∞–±–æ vitest —ñ–∑ `globals: true`, `createTestingPinia` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–±–∏—Ç—å –¥—ñ—ó –∑–∞–≥–ª—É—à–∫–∞–º–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –Ω–∞–≥–ª—è–¥–∞—Ü—å–∫–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ —ñ—Å–Ω—É—é—á–æ—ó —Ç–µ—Å—Ç–æ–≤–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ (`jest.fn` –∞–±–æ `vitest.fn`). –Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ —ñ–Ω—à—É —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –Ω–∞–¥–∞—Ç–∏ –æ–ø—Ü—ñ—é [createSpy](/api/interfaces/pinia_testing.TestingOptions.html#createspy):

```js
import sinon from 'sinon'

createTestingPinia({
  createSpy: sinon.spy, // –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –Ω–∞–≥–ª—è–¥–∞—á–∞ sinon –¥–ª—è –æ–±–≥–æ—Ä—Ç–∞–Ω–Ω—è –¥—ñ–π
})
```

–í–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ –±—ñ–ª—å—à–µ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ —É [—Ç–µ—Å—Ç–∞—Ö –ø–∞–∫–µ—Ç—É —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è](https://github.com/vuejs/pinia/blob/v2/packages/testing/src/testing.spec.ts).

### –Ü–º—ñ—Ç–∞—Ü—ñ—è –≥–µ—Ç–µ—Ä—ñ–≤

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –±—É–¥—å-—è–∫–∏–π –≥–µ—Ç–µ—Ä –æ–±—á–∏—Å–ª—é–≤–∞—Ç–∏–º–µ—Ç—å—Å—è —è–∫ –∑–≤–∏—á–∞–π–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è, –∞–ª–µ –≤–∏ –º–æ–∂–µ—Ç–µ –≤—Ä—É—á–Ω—É –ø—Ä–∏–º—É—Å–æ–≤–æ –≤–∫–∞–∑–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è, –≤—Å—Ç–∞–Ω–æ–≤–∏–≤—à–∏ –¥–ª—è –≥–µ—Ç–µ—Ä–∞ –±—É–¥—å-—è–∫–µ:

```ts
import { defineStore } from 'pinia'
import { createTestingPinia } from '@pinia/testing'

const useCounterStore = defineStore('counter', {
  state: () => ({ n: 1 }),
  getters: {
    double: (state) => state.n * 2,
  },
})

const pinia = createTestingPinia()
const counter = useCounterStore(pinia)

counter.double = 3 // ü™Ñ –≥–µ—Ç–µ—Ä–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –¥–ª—è –∑–∞–ø–∏—Å—É –ª–∏—à–µ –≤ —Ç–µ—Å—Ç–∞—Ö

// –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è undefined, —â–æ–± —Å–∫–∏–Ω—É—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É
// @ts-expect-error: –∑–∞–∑–≤–∏—á–∞–π —Ü–µ —á–∏—Å–ª–æ
counter.double = undefined
counter.double // 2 (=1 x 2)
```

### –ü–ª–∞–≥—ñ–Ω–∏ Pinia

–Ø–∫—â–æ —É –≤–∞—Å —î —è–∫—ñ—Å—å –ø–ª–∞–≥—ñ–Ω–∏ pinia, –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –ø–µ—Ä–µ–¥–∞—î—Ç–µ —ó—Ö –ø—ñ–¥ —á–∞—Å –≤–∏–∫–ª–∏–∫—É `createTestingPinia()`, —â–æ–± –≤–æ–Ω–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞–ª–∏—Å—è. **–ù–µ –¥–æ–¥–∞–≤–∞–π—Ç–µ —ó—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `testingPinia.use(MyPlugin)`**, —è–∫ –≤–∏ —Ä–æ–±–∏—Ç–µ –∑—ñ –∑–≤–∏—á–∞–π–Ω–æ—é pinia:

```js
import { createTestingPinia } from '@pinia/testing'
import { somePlugin } from '../src/stores/plugin'

// –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —è–∫–æ–≥–æ—Å—å —Ç–µ—Å—Ç—É
const wrapper = mount(Counter, {
  global: {
    plugins: [
      createTestingPinia({
        stubActions: false,
        plugins: [somePlugin],
      }),
    ],
  },
})
```

## E2E —Ç–µ—Å—Ç–∏

–©–æ —Å—Ç–æ—Å—É—î—Ç—å—Å—è Pinia, –≤–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω—ñ—á–æ–≥–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç—ñ–≤ E2E, —É —Ü—å–æ–º—É –≤—Å—è —Å—É—Ç—å —Ü–∏—Ö —Ç–µ—Å—Ç—ñ–≤! –í–∏ –º–æ–≥–ª–∏ –±–∏, –Ω–∞–ø–µ–≤–Ω–æ, –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ HTTP-–∑–∞–ø–∏—Ç–∏, –∞–ª–µ —Ü–µ –≤–∏—Ö–æ–¥–∏—Ç—å –∑–∞ —Ä–∞–º–∫–∏ —Ü—å–æ–≥–æ –ø–æ—Å—ñ–±–Ω–∏–∫–∞ üòÑ.

## –ú–æ–¥—É–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ (Vue 2)

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ [Vue Test Utils 1](https://v1.test-utils.vuejs.org/), –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Pinia –Ω–∞ `localVue`:

```js
import { PiniaVuePlugin } from 'pinia'
import { createLocalVue, mount } from '@vue/test-utils'
import { createTestingPinia } from '@pinia/testing'

const localVue = createLocalVue()
localVue.use(PiniaVuePlugin)

const wrapper = mount(Counter, {
  localVue,
  pinia: createTestingPinia(),
})

const store = useSomeStore() // –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç–µ—Å—Ç—É–≤–∞–ª—å–Ω—É pinia!
```
